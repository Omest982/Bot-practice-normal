# Bot-practice-normal
Телеграм бот который может сохранять в БД и отдавать обратно фото и документы, регистрировать пользователя через email сообщение.

## Microservices

### dispatcher
Принимает сообщения с телеграмма и определяет в какую очередь RabbitMQ его поместить.
Принимает ответы от микросервиса node и отправляет в чат пользователю.

### node
Отслеживает и принимает сообщения с очередей RabbitMQ и обрабатывает их в соотвествии их типу, перед этим сохраня необработанное сообщение и пользователя в БД.
Для сообщений содержащих фото или документ создает ссылку на скачивание, id документа в которой зашифровано, после сохранения их в БД. Отправляет ссылку на скачивание в очередь RabbitMQ которую отслеживает микросервис dispatcher.
Отвечает за регистрацию пользователя через отправку ссылки на регистрацию на email.

### common-jpa
Содержит все базы данных и репозитории работающие с ними, которые используются в проете.

### common-utils 
Содержит вспомогательные утилиты.(шифрование)

### rest-service
Содержит 2 контроллера
#### FileController:
Отвечает за отдачу файлов и фото из БД пользователюю
#### UserActivationController:
Отвечает за активацию пользователя в программе.

### mail-service
Содержит контроллер который принимает обьект MailParams(описанный в common-utils) и отправляет сообщение на email.
